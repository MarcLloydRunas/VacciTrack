<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <!--<meta http-equiv="x-ua-compatible" content="ie=edge" /> -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="icon" href="../img/VacciTrack_logo_3A_2.png">
    <title>VacciTrack</title>

    <link rel="stylesheet" type="text/css" href="../build/css/bootstrap.min.css?v=1660014477">
    <link rel="stylesheet" type="text/css" href="../build/css/login.css?v=1660014477">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../build/css/dashboard.css?v=1660014477">
    <link rel="stylesheet" type="text/css" href="../build/css/alt-dash.css?v=1660014477">
    <link rel="stylesheet" type="text/css" href="../build/css/admin.css?v=1660014477">
    <link rel="stylesheet" type="text/css" href="../build/css/publicnav.css?v=1660014477">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap5.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/bootstrap-print.min.css" media="print">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.min.js"></script>
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" >-->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.1/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js" crossorigin="anonymous"></script> -->
    <script type="text/javascript" src="../build/js/alt-dash.js"></script>
    <script type="text/javascript" src="../build/js/graphs.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script> 
    <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>   
    <script>
        $(function(){
            $('a').each(function(){
                if ($(this).prop('href') == window.location.href) {
                    $(this).addClass('active'); $(this).parents('li').addClass('active');
                }
            });
        });
    </script>       
  </head>
  <body class="cusbody">
<br />
<b>Warning</b>:  session_start(): Cannot send session cache limiter - headers already sent (output started at C:\phpdesktop-chrome-57.0-rc-php-7.1.3\www\templates\header.php:10) in <b>C:\phpdesktop-chrome-57.0-rc-php-7.1.3\www\admin\dashboard-admin.php</b> on line <b>3</b><br />
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <!--<meta http-equiv="x-ua-compatible" content="ie=edge" /> -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="icon" href="../img/VacciTrack_logo_3A_2.png">
    <title>VacciTrack</title>

    <link rel="stylesheet" type="text/css" href="../build/css/bootstrap.min.css?v=1660014477">
    <link rel="stylesheet" type="text/css" href="../build/css/login.css?v=1660014477">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../build/css/dashboard.css?v=1660014477">
    <link rel="stylesheet" type="text/css" href="../build/css/alt-dash.css?v=1660014477">
    <link rel="stylesheet" type="text/css" href="../build/css/admin.css?v=1660014477">
    <link rel="stylesheet" type="text/css" href="../build/css/publicnav.css?v=1660014477">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap5.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/bootstrap-print.min.css" media="print">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.min.js"></script>
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" >-->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.1/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js" crossorigin="anonymous"></script> -->
    <script type="text/javascript" src="../build/js/alt-dash.js"></script>
    <script type="text/javascript" src="../build/js/graphs.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script> 
    <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>   
    <script>
        $(function(){
            $('a').each(function(){
                if ($(this).prop('href') == window.location.href) {
                    $(this).addClass('active'); $(this).parents('li').addClass('active');
                }
            });
        });
    </script>       
  </head>
  <body class="cusbody">

<div class="dashbody" id="body-pd">
    <header class="header" id="header">
        <div class="header_toggle"> <i class='bx bx-menu' id="header-toggle" onclick="openEnt()"> <img id="logo-top" src="../img/VacciTrack_logo_3B.png" alt="Logo"></i> </div>
        <div class="header_img"> RHU-Tuba </div>
    </header>
    <Scrollbar>
    <div class="l-navbar" id="nav-bar">
        <nav class="nav">
            <div> 
                <p href="#" class="nav_logo"> <i class='bx bx-user-circle nav_logo-icon'></i> <span class="nav_logo-name">marc</span> </p>
            <div class="nav_list"> 
                <a href="../admin/default-dash.php" class="nav_link"> <i class='bx bx-grid-alt nav_icon'></i> <span class="nav_name">Dashboard</span> </a>

                <nav class="sidebar">
                    <ul class="nav flex-column" id="nav_accordion">
                        <li class="nav-item has-submenu">
                            <a class="nav_link" href="#"> <i class='bx bx-user nav_icon'></i> <span class="nav_name">Accounts</span>  </a>
                            <ul class="submenu collapse">
                                <li class="sublink"><a href="../admin/user-accounts.php" class="nav_link sub_link">
                                        <i class='bx bx-group nav_icon'></i> <span class="nav_name">Users</span> </a> 
                                </li>
                                <li class="sublink"><a href="../admin/user-accounts-reg.php" class="nav_link sub_link"> 
                                        <i class='bx bx-user-plus nav_icon'></i> <span class="nav_name">Add User</span> </a>
                                </li>
                                <li class="sublink"><a href="../admin/user-requests-admin.php" class="nav_link sub_link"> 
                                        <i class='bx bx-user-check nav_icon'></i> <span class="nav_name">Access Requests</span> </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </nav>

            
                <a href="../admin/vacc-site.php" class="nav_link"> 
                    <i class='bx bx-map-pin nav_icon'></i> <span class="nav_name">Vaccination Sites</span> </a> 
                <a href="../admin/vacc-name.php" class="nav_link"> 
                    <i class='bx bx-injection nav_icon'></i> <span class="nav_name">List of Vaccines</span> </a> 
                <a href="../admin/list_sched.php" class="nav_link"> 
                    <i class='bx bx-calendar-check nav_icon'></i> <span class="nav_name">Vaccination Dates</span> </a> 
                <a href="../admin/admin_statistics.php" class="nav_link"> 
                    <i class='bx bx-stats nav_icon'></i> <span class="nav_name">Statistics</span> </a>  
                

                <nav class="sidebar">
                    <ul class="nav flex-column" id="nav_accordion">
                        <li class="nav-item has-submenu">
                            <a class="nav_link" href="#"> <i class='bx bx-customize nav_icon'></i> <span class="nav_name">Settings</span>  </a>
                            <ul class="submenu collapse">
                                <li class="sublink"><a href="../admin/update_account.php" class="nav_link sub_link">
                                        <i class='bx bx-message-square-edit nav_icon'></i> <span class="nav_name">Update Account</span> </a> 
                                </li>
                                <li class="sublink"><a href="../admin/activity_logs.php" class="nav_link sub_link"> 
                                        <i class='bx bx-notepad nav_icon'></i> <span class="nav_name">Activity Logs</span> </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </nav>

            </div>
            </div> <a href="../templates/logout.php" class="nav_link"> <i class='bx bx-log-out nav_icon'></i> <span class="nav_name">SignOut</span> </a>
        </nav>
    </div>
</div>

<script>
    $(function(){
        $('a').each(function(){
            if ($(this).prop('href') == window.location.href) {
                $(this).addClass('active'); 
            }
        });
    });

    document.addEventListener("DOMContentLoaded", function(){
      document.querySelectorAll('.sidebar .nav_link').forEach(function(element){
        
        element.addEventListener('click', function (e) {

          let nextEl = element.nextElementSibling;
          let parentEl  = element.parentElement;    

            if(nextEl) {
                e.preventDefault(); 
                let mycollapse = new bootstrap.Collapse(nextEl);
                
                if(nextEl.classList.contains('show')){
                  mycollapse.hide();
                } else {
                    mycollapse.show();
                    // find other submenus with class=show
                    var opened_submenu = parentEl.parentElement.querySelector('.submenu.show');
                    // if it exists, then close all of them
                    if(opened_submenu){
                      new bootstrap.Collapse(opened_submenu);
                    }
                }
            }
        }); // addEventListener
      }) // forEach
    }); 
        
</script>

    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script>
    $(document).ready(function() {
      $('#tablelogs').DataTable();
    } );
    </script>

    </body>

    </html>
<div class="dashbody" id="body-pd"><script>
    document.addEventListener("DOMContentLoaded", function(event) {

const showNavbar = (toggleId, navId, bodyId, headerId) =>{
const toggle = document.getElementById(toggleId),
nav = document.getElementById(navId),
bodypd = document.getElementById(bodyId),
headerpd = document.getElementById(headerId)

// Validate that all variables exist
if(toggle && nav && bodypd && headerpd){
toggle.addEventListener('click', ()=>{
// show navbar
nav.classList.toggle('show')
// change icon
toggle.classList.toggle('bx-x')
// add padding to body
bodypd.classList.toggle('body-pd')
// add padding to header
headerpd.classList.toggle('body-pd')

})
}
}

showNavbar('header-toggle','nav-bar','body-pd','header')

/*===== LINK ACTIVE =====*/
const linkColor = document.querySelectorAll('.nav_link')

function colorLink(){
if(linkColor){
linkColor.forEach(l=> l.classList.remove('active'))
this.classList.add('active')
}
}
linkColor.forEach(l=> l.addEventListener('click', colorLink))

// Your code to run since DOM is loaded and ready
});

function openEnt() {
	var openDash = document.getElementById("reg-accounts");
	openDash.classList.toggle("dash-open");
}

function myFunction() {
  var input, filter, table, tr, td, i, txtValue;
  input = document.getElementById("myInput");
  filter = input.value.toUpperCase();
  table = document.getElementById("myTable");
  tr = table.getElementsByTagName("tr");
  for (i = 0; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[0];
    if (td) {
      txtValue = td.textContent || td.innerText;
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }       
  }
}
function success() {
   if(document.getElementById("textsend").value==="") { 
            document.getElementById('button').disabled = true; 
        } else { 
            document.getElementById('button').disabled = false;
        }
    }

function tooltip() {
  ('[data-toggle="tooltip"]').tooltip()
}

const searchButton = document.getElementById('search-button');
const searchInput = document.getElementById('search-input');
searchButton.addEventListener('click', () => {
  const inputValue = searchInput.value;
  alert(inputValue);
});

$(function(){
    $('a').each(function(){
        if ($(this).prop('href') == window.location.href) {
            $(this).addClass('active'); $(this).parents('li').addClass('active');
        }
    });
});

document.addEventListener("DOMContentLoaded", function(){
  document.querySelectorAll('.sidebar .nav_link').forEach(function(element){
    
    element.addEventListener('click', function (e) {

      let nextEl = element.nextElementSibling;
      let parentEl  = element.parentElement;    

        if(nextEl) {
            e.preventDefault(); 
            let mycollapse = new bootstrap.Collapse(nextEl);
            
            if(nextEl.classList.contains('show')){
              mycollapse.hide();
            } else {
                mycollapse.show();
                // find other submenus with class=show
                var opened_submenu = parentEl.parentElement.querySelector('.submenu.show');
                // if it exists, then close all of them
                if(opened_submenu){
                  new bootstrap.Collapse(opened_submenu);
                }
            }
        }
    }); // addEventListener
  }) // forEach
});  </script>

<div id="reg-accounts" class="content-box">
		<h2>Dashboard</h2>

	
	<div class="row container-fluid">

		<div class="col-12 col-sm-6 col-md-3">
            <div class="card info-box mb-3">
              <span class="info-box-icon bg-info elevation-1"><i class="fas fa-map-marked-alt"></i></span>	
				
								<div class="card-body">
		            <h5><span class="card-title">Vaccination Facilities</span></h5>
		            <span class="info-box-number">
		            <h5 class="badge rounded-pill bg-secondary">5</h5>
		              <a href="../admin/vacc-site.php"><img class ="img-fluid card-img-top" src="../img/location.png" href="../admin/vacc-site.php" style="margin-left: auto; margin-right: auto; width:200px; height: 200px;display: block;"></a>
		            </span>
		        </div>
		      </div>
		    </div>
		        <div class="col-12 col-sm-6 col-md-3">
            <div class="card info-box">
		        <span class="info-box-icon bg-light elevation-1"><i class="fas fa-prescription-bottle-alt"></i></span>

              <div class="card-body">
                <h5><span class="card-title">Vaccine Listed</span></h5>
                <span class="info-box-number">
		            <h5 class="badge rounded-pill bg-secondary">13</h5>
		              <a href="../admin/vacc-name.php"><img class ="img-fluid card-img-top" src="../img/syringe.png" href="../admin/vacc-site.php" style="margin-left: auto; margin-right: auto; width:200px; height: 200px;display: block;"></a>
		            </span>
		        </div>
		      </div>
		    </div>

		    	<div class="col-12 col-sm-6 col-md-3">
            <div class="card info-box mb-3">
              <span class="info-box-icon bg-success elevation-1"><i class=""></i></span>
		        <div class="card-body">
		            <h5><span class="card-title">Listed Individuals</span></h5>
		            <span class="info-box-number">
		            <h5 class="badge rounded-pill bg-secondary">7</h5>
		              <a href="../admin/user-accounts.php"><img class ="img-fluid card-img-top" src="../img/profile.png" href="../admin/vacc-site.php" style="margin-left: auto; margin-right: auto; width:200px; height: 200px;display: block;"></a>
		            </span>
		        </div>
    		</div>
		</div>

		<div class="col-12 col-sm-6 col-md-3">
            <div class="card info-box mb-3">
              <span class="info-box-icon bg-success elevation-1"><i class=""></i></span>
		        <div class="card-body">
		            <h5><span class="card-title">Access Requests</span></h5>
		            <span class="info-box-number">
		            <h5 class="badge rounded-pill bg-secondary">9</h5>
		              <a href="../admin/user-accounts.php"><img class ="img-fluid card-img-top" src="../img/access-icon.png" href="../admin/vacc-site.php" style="margin-left: auto; margin-right: auto; width:200px; height: 200px;display: block;"></a>
		            </span>
		        </div>
    		</div>
		</div>

	</div>

<br>
	<div class="container-fluid">
		<div class="row g-0" style="background-color: lightgray; align-items: center; margin: auto; padding: 7px; border-radius: 4px;">
				<div class="col-md-8"><p style="font-size: 1.3vw; margin: auto; font-weight: bold; padding-left: 5px;" >Vaccination Site</p></div>
			</div>
			<div class="row">
				<div class="col-md-6">
					<div class="card mt-4">
						<div class="card-body">
							<div class="chart-container pie-chart">
								<canvas id="pie_chart"></canvas>
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-6">
					<div class="card mt-4 mb-4">
						<div class="card-body">
							<div class="chart-container pie-chart">
								<canvas id="bar_chart"></canvas>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="row g-0" style="background-color: lightgray; align-items: center; margin: auto; padding: 7px; border-radius: 4px;">
				<div class="col-md-8"><p style="font-size: 1.3vw; margin: auto; font-weight: bold; padding-left: 5px;" >Vaccine</p></div>
			</div>
			<div class="row">
				<div class="col-md-6">
					<div class="card mt-4">
						<div class="card-body">
							<div class="chart-container pie-chart">
								<canvas id="vacc_pie_chart"></canvas>
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-6">
					<div class="card mt-4 mb-4">
						<div class="card-body">
							<div class="chart-container pie-chart">
								<canvas id="vacc_bar_chart"></canvas>
							</div>
						</div>
					</div>
				</div>
			</div>

</div>

<script type="text/javascript">
	
	$(document).ready(function(){

		makechart();

		function makechart()
		{
			$.ajax({
				url:"../user/data/graphdata.php",
				method:"POST",
				data:{action:'fetch'},
				dataType:"JSON",
				success:function(data)
				{
					var site_name = [];
					var total = [];
					var color = [];

					for(var count = 0; count < data.length; count++)
					{
						site_name.push(data[count].site_name);
						total.push(data[count].total);
						color.push(data[count].color);
					}

					var chart_data = {
						labels:site_name,
						datasets:[
							{
								label:'Records',
								backgroundColor:color,
								color:'#fff',
								data:total
							}
						]
					};

					var options = {
						responsive:true,
						scales:{
							yAxes:[{
								ticks:{
									min:0
								}
							}]
						}
					};

					var group_chart1 = $('#pie_chart');

					var graph1 = new Chart(group_chart1, {
						type:"pie",
						data:chart_data
					});



					var group_chart3 = $('#bar_chart');

					var graph3 = new Chart(group_chart3, {
						type:'bar',
						data:chart_data,
						options:options
					});
				}
			})
		}

		makechartvacc();

		function makechartvacc()
		{
			$.ajax({
				url:"../user/data/vaccdata.php",
				method:"POST",
				data:{action:'fetch'},
				dataType:"JSON",
				success:function(data)
				{
					var vaccine_name = [];
					var total = [];
					var color = [];

					for(var count = 0; count < data.length; count++)
					{
						vaccine_name.push(data[count].vaccine_name);
						total.push(data[count].total);
						color.push(data[count].color);
					}

					var chart_data = {
						labels:vaccine_name,
						datasets:[
							{
								label:'Records',
								backgroundColor:color,
								color:'#fff',
								data:total
							}
						]
					};

					var options = {
						responsive:true,
						scales:{
							yAxes:[{
								ticks:{
									min:0
								}
							}]
						}
					};

					var group_chart1 = $('#vacc_pie_chart');

					var graph1 = new Chart(group_chart1, {
						type:"pie",
						data:chart_data
					});



					var group_chart3 = $('#vacc_bar_chart');

					var graph3 = new Chart(group_chart3, {
						type:'bar',
						data:chart_data,
						options:options
					});
				}
			})
		}

	});

</script>

</div><footer class="user-footer" id="user-footer">
    <div class="footer-bottom-user row">
       <p class="col">&nbsp copyright &copy;2022. All Rights Reserved.</p>
       <a class="vbrand col" href="#">VacciTrack</a>
    </div>
</footer>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script>
    $(document).ready(function() {
      $('#tablelogs').DataTable();
    } );
    </script>

    </body>

    </html>
